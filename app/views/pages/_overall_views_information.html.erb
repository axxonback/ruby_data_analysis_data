<%-
  stats_for_week = Page.stats_for_week_for_datatype(datatype)
  pages = (stats_for_week[:pages] || 0)
  new_pages = stats_for_week[:new_pages]
  views = (stats_for_week[:views] || 0)
-%>  
<p><span class='bignumber'><%= number_with_delimiter(pages)%></span> pages ( <span class='mednumber'><%= new_pages%></span> new pages )</p>
<p><span class='bignumber'><%=number_with_precision(views, :precision => 1)%></span> Views (average per page)</p>

<p>Views change from previous week: 
<%- if stats_for_week[:change_week] -%> 
  <span class='mednumber <%=sign_class_percentage(stats_for_week[:change_week])%>'><%=number_to_percentage(stats_for_week[:change_week] * 100, :precision => 2)%></span>
<%- else -%>
  <span class='mednumber'>n/a</span>
<%- end -%>
</p>
<p>Views change from same week last year:
<%- if stats_for_week[:change_year] -%>
    <span class='mednumber <%=sign_class_percentage(stats_for_week[:change_year])%>'><%=number_to_percentage(stats_for_week[:change_year] * 100, :precision => 2)%></span>
<%- else -%>
   <span class='mednumber'>n/a</span>
<%- end -%>
</p>

<p>Views trend over last <%=Settings.recent_weeks%> weeks:
<%- if stats_for_week[:recent_change] -%>
  <span class='mednumber <%=sign_class_percentage(stats_for_week[:recent_change])%>'><%=up_or_down_percentage(stats_for_week[:recent_change])%></span> 
  (<span class='<%=sign_class_percentage(stats_for_week[:recent_change])%>'><%=number_to_percentage(stats_for_week[:recent_change] * 100, :precision => 2) %>)
<%- else -%>
  <span class='mednumber'>n/a</span>
<%- end -%>
</p>

<%- if stats_for_week[:recent_change] -%>
  <p>Average views per page over <%=stats_for_week[:weeks]%> weeks:
    <span class='mednumber'><%=number_with_precision(stats_for_week[:average], :precision => 1)%></span>  
  </p>
<%- end -%>